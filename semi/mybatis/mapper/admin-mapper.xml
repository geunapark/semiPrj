<?xml version="1.0" encoding="UTF-8" ?>

	<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="AdminMapper">
<!-- 관리자 로그인  -->
<select id="adminlogin" parameterType="AdminVo" resultType="AdminVo"> 
SELECT NO, ID, PWD, NICK FROM ADMIN 
WHERE ID = #{id} AND PWD = #{pwd} 
</select>
<!-- 영화 등록하기   -->
<insert id="movieInsert"> 
INSERT INTO MOVIE ( 
		NO 
		,TYPE 
		,AGE
		,NAME 
		,SUMMARY 
		,CAST 
		,DIRECTOR 
		,RUNNING_TIME 
		,DEL_YN 
		,POSTER
		,RELEASE_DATE
		) VALUES ( 
		SEQ_MOVIE.NEXTVAL 
		,#{type} 
		,#{age} 
		,#{name}
		,#{summary} 
		,#{cast} 
		,#{director} 
		,#{runningTime} 
		,'N' 
		,#{poster}
		,#{releaseDate} 
		) 
</insert>
<!--  상품 등록하기  -->
<insert id="storeInsert"> 
	INSERT INTO PRODUCT ( NO ,CATERGORY ,NAME ,PRICE ,ORIGIN_COUNTRY ,NUTRIENTE_IMG ,PRODUCT_IMG ) 
	VALUES ( SEQ_PRODUCT.NEXTVAL ,#{category} ,#{name} ,#{price} ,#{originCountry} ,#{nutrienteImg} ,#{productImg} ) 
</insert>
<!--  영화관 등록하기  -->
<insert id="cinemaInsert"> 
INSERT INTO CINEMA( 
		NO 
		,CINEMA_NAME 
		,CINEMA_ADDRESS 
		,CINEMA_TEL 
		,DEL_YN 
		,CINEMA_IMG 
		,CINEMA_LOCATION
		,CINEMA_CONTENT
		)VALUES 
		( 
		SEQ_CINEMA.NEXTVAL 
		, #{cinemaName} 
		, #{cinemaAddress} 
		, #{cinemaTel} 
		,'N' 
		, #{cinemaImg} 
		,#{cinemaLocation}
		,#{cinemaContent}
		) 
</insert>
<!-- 이벤트 등록  -->
<insert id="eventInsert"> 
INSERT INTO EVENT
( NO ,WRITER_NO ,TITLE ,CONTENT_IMG ,UPLOAD_DATE ,VIEWS ,DEL_YN )
VALUES 
( SEQ_EVENT.NEXTVAL ,#{writerNo} ,#{title} ,#{contentImg} ,CURRENT_TIMESTAMP ,#{views} ,'N' )
 </insert>
<!--  자주묻는 질문 등록  -->
<insert id="faqInsert"> 
INSERT INTO FAQ
( NO 
,WRITER_NO 
,TITLE 
,CONTENT 
,VIEWS 
,UPLOAD_DATE 
,DEL_YN 
)VALUES 
( SEQ_FAQ.NEXTVAL 
,#{writerNo} 
,#{title} 
,#{content} 
,#{views} 
,CURRENT_TIMESTAMP 
,'N' 
) 
</insert>
<!--  공지사항 등록  -->
<insert id="noticeInsert"> INSERT INTO NOTICE( NO ,WRITER_NO ,TITLE ,CONTENT ,UPLOAD_DATE ,VIEWS ,DEL_YN )VALUES ( SEQ_NOTICE.NEXTVAL ,#{writerNo} ,#{title} ,#{content} ,CURRENT_TIMESTAMP ,#{views} ,'N' ) </insert>
<!--  관 등록  -->
<insert id="theaterInsert"> INSERT INTO THEATER_TYPE ( NO ,TYPE ,THEATER_IMG ,PRICE ) VALUES ( SEQ_THEATER_TYPE.NEXTVAL ,#{type} ,#{theaterImg} ,#{price} ) </insert>
<!--     	영화관 리스트  -->
<select id="cinemaList" resultType="AdminCinemaVo"> SELECT * FROM CINEMA </select>
<!--  	스토어리스트  -->
<select id="storeList" resultType="AdminStoreVo">
SELECT P.NO
    ,P.NAME
    ,P.PRICE
    ,C.TYPE
FROM PRODUCT P
JOIN CATEGORY C
ON P.CATEGORY_NO = C.NO
</select>
<!--     	이벤트 리스트  -->
<select id="eventList" resultType="AdminEventVo"> SELECT * FROM EVENT </select>
<!--     	자주묻는질문 리스트  -->
<select id="faqList" resultType="AdminFaqVo"> SELECT * FROM FAQ </select>
<!--     	영화 리스트  -->
<select id="movieList" resultType="com.kh.app.admin.movie.vo.AdminMovieVo"> 
SELECT 
NO
,TYPE
,AGE
,NAME
,SUMMARY
,CAST
,DIRECTOR
,RUNNING_TIME
,RELEASE_DATE
FROM MOVIE 
</select>
<!--     	공지사항 리스트  -->
<select id="noticeList" resultType="AdminNoticeVo"> SELECT * FROM NOTICE </select>
<!--     	관 리스트  -->
<select id="theaterList" resultType="AdminTheaterVo"> SELECT * FROM THEATER_TYPE </select>

<select id="memberList" resultType="com.kh.app.admin.member.vo.AdminMemberVo">
SELECT * FROM MEMBER
</select>
<delete id="cinemaDelete"> DELETE FROM CINEMA WHERE NO = #{no} </delete>
<delete id="eventDelete"> DELETE FROM EVENT WHERE NO = #{no} </delete>
<delete id="faqDelete"> DELETE FROM FAQ WHERE NO = #{no} </delete>
<delete id="movieDelete"> DELETE FROM MOVIE WHERE NO = #{no} </delete>
<delete id="noticeDelete"> DELETE FROM NOTICE WHERE NO = #{no} </delete>
<delete id="storeDelete"> DELETE FROM PRODUCT WHERE NO = #{no} </delete>
<delete id="theaterDelete"> DELETE FROM "THEATER_TYPE" WHERE NO = #{no} </delete>

<update id="cinemaEdit">
	UPDATE CINEMA
	SET CINEMA_NAME = #{cinemaName}
	WHERE NO = #{no}
</update>
<update id="eventUpdate">
	UPDATE EVENT
	SET TITLE = #{title}
	WHERE NO = #{no}
</update>
<update id="faqEdit">
	UPDATE FAQ
	SET TITLE = #{title}
	WHERE NO = #{no}
</update>
<update id="movieEdit">
	UPDATE MOVIE
	SET SUMMARY = #{summary}
	WHERE NO = #{no}
</update>
<update id="noticeEdit">
	UPDATE NOTICE
	SET CONTENT = #{content}
	WHERE NO = #{no}
</update>
<update id="storeEdit">
	UPDATE PRODUCT
	SET PRICE = #{price}
	WHERE NO = #{no}
</update>
<update id="theaterEdit">
	UPDATE THEATER
	SET TYPE = #{type}
	WHERE NO = #{no}
</update>

<update id="rentWriter">
	UPDATE RENT
	SET 
		ANSWER_TITLE = #{answerTitle}
		, ANSWER_CONTENT = #{answerContent}
	WHERE NO = #{no};
	
</update>

<select id="select" resultType="com.kh.app.admin.rent.vo.AdminRentVo">
	SELECT *
	FROM RENT
	WHERE NO = #{no}
</select>

<select id="selectList" resultType="com.kh.app.admin.rent.vo.AdminRentVo">
	SELECT
	NO
	,WRITER_NO
	,TITLE
	,CONTENT
	,UPLOAD_DATE
	
	FROM RENT
</select>

<select id="movieSelectOne" resultType="com.kh.app.admin.movie.vo.AdminMovieVo">
	SELECT
	*
	FROM MOVIE
</select>

</mapper>